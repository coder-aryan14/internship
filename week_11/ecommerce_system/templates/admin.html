{% extends "base.html" %}
{% block content %}
<h2>Admin dashboard</h2>
<p>Manage categories, products, and inspect orders.</p>

<div class="grid-3" style="margin-top:1.5rem;">
  <article class="card">
    <h3>Categories</h3>
    <ul>
      {% for cat in categories %}
      <li>
        {{ cat.name }}
        <small style="color:var(--muted-color);">{{ cat.description }}</small>
      </li>
      {% else %}
      <li>No categories yet.</li>
      {% endfor %}
    </ul>
    <hr />
    <form method="post" action="/admin/categories">
      <label>
        Name
        <input name="name" required />
      </label>
      <label>
        Description
        <input name="description" />
      </label>
      <button type="submit">Add category</button>
    </form>
  </article>

  <article class="card">
    <h3>Products</h3>
    <ul>
      {% for product in products %}
      <li>
        {{ product.name }} — ₹ {{ "%.2f"|format(product.price) }} (stock: {{ product.stock }})
      </li>
      {% else %}
      <li>No products yet.</li>
      {% endfor %}
    </ul>
    <hr />
    <form method="post" action="/admin/products">
      <label>
        Name
        <input name="name" required />
      </label>
      <label>
        Price
        <input name="price" type="number" min="0" step="0.01" required />
      </label>
      <label>
        Stock
        <input name="stock" type="number" min="1" value="5" required />
      </label>
      <label>
        Category
        <select name="category_id" required>
          {% for cat in categories %}
          <option value="{{ cat.id }}">{{ cat.name }}</option>
          {% endfor %}
        </select>
      </label>
      <label>
        Description
        <input name="description" />
      </label>
      <button type="submit">Add product</button>
    </form>
  </article>

  <article class="card">
    <h3>Recent orders</h3>
    <ul>
      {% for order in orders %}
      <li>
        <strong>#{{ order.id[:8] }}</strong> — {{ order.status.value }} —
        ₹ {{ "%.2f"|format(order.subtotal) }}
        <small>{{ order.summary() }}</small>
      </li>
      {% else %}
      <li>No orders yet.</li>
      {% endfor %}
    </ul>
  </article>
</div>
{% endblock %}



