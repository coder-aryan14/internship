{% extends "base.html" %}
{% block content %}
<article class="card">
  <header style="display:flex;justify-content:space-between;align-items:center;">
    <div>
      <h2>Your cart</h2>
      <p>Review items and choose your preferred payment method.</p>
    </div>
    <a href="/" class="secondary">← Continue shopping</a>
  </header>

  {% if not items %}
  <p>Your cart is empty.</p>
  {% else %}
  <table>
    <thead>
      <tr>
        <th>Product</th>
        <th>Qty</th>
        <th>Line total</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
      <tr>
        <td>{{ item.name }}</td>
        <td>{{ item.quantity }}</td>
        <td>₹ {{ "%.2f"|format(item.line_total) }}</td>
        <td>
          <form method="post" action="/cart/remove" style="margin:0;">
            <input type="hidden" name="product_id" value="{{ item.product_id }}" />
            <button type="submit" class="secondary outline">Remove</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <p style="text-align:right;font-weight:600;font-size:1.1rem;">
    Total: ₹ {{ "%.2f"|format(total) }}
  </p>

  <form method="post" action="/cart/checkout">
    <label>
      Payment method
      <select name="payment_method" required>
        <option value="upi">UPI (instant)</option>
        <option value="card">Card (OTP demo)</option>
        <option value="bank_transfer">Bank transfer</option>
        <option value="cod">Cash on delivery</option>
      </select>
    </label>
    <footer>
      <button type="submit">Place order</button>
    </footer>
  </form>
  {% endif %}
</article>
{% endblock %}



